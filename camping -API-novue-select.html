<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>營區攻略</title>
    <link rel="stylesheet" href="https://npmcdn.com/leaflet@0.7.7/dist/leaflet.css" />
    <script src="https://npmcdn.com/leaflet@0.7.7/dist/leaflet.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="./pic/commom/1017_logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div class="bgcColor page">

    <section class="section1">
        <div class="wrap">
            <div class="title">營區攻略</div>
            <div class="breadcrumbs">
                <ul>
                    <li><a href="./shansen.html"  class="level0 green1">首頁</a></li>
                    <li class="level0 gray1">營區攻略</li>
                </ul>
            </div>
            <div class="spot camping_block">
                <div id="weatherbox">
                    <div class="sub_title">尋找營區</div>
                    <div class="weather">
                        <div class="weathernow">
                            <!-- 地區搜尋 -->
                            <div class="search_area">
                                <div class="weatherselect">
                                    <p>
                                        <label class="third_title" for="">選擇地區:</label>
                                        <select class="selectstyle" name="area" id="area" 
                                        onChange="doNewMaster( document.getElementById( 'area' ), 
                                        document.getElementById( 'campSpot' ) );">
                                        </select>
                                    </p>
                                    <p>
                                        <label class="third_title" for="">選擇營地:</label>
                                        <select class="selectstyle" name="campSpot" id="campSpot">
                                        </select>
                                    </p>
                                </div>
                            </div>
                                
                            <!-- 溫度、降雨、濕度 -->
                            <div class="infos">
                                <div class="NowT infosbox">
                                    <p class="title" id="NowT"></p>
                                    <div class="TtoT">
                                        <span id=MinT></span>~
                                        <span id=MaxT></span>
                                    </div>
                                </div>
                                <div class="PoP infosbox">
                                    降雨機率
                                    <p id="PoP"></p>
                                </div>
                                <div class="RH infosbox">
                                    相對溼度
                                    <p id="RH"></p>
                                </div>
                            </div>
                            <!-- 未來一周 -->
                            <div class="weatherweek">
                                <div class="day1 week">
                                    <p class="day" id="date1"></p>
                                    <p class="temp" id="Ttop1"></p>
                                    <p class="temp" id="Tlow1"></p>
                                </div>
                                <div class="day2 week">
                                    <p class="day" id="date2"></p>
                                    <p class="temp" id="Ttop2"></p>
                                    <p class="temp" id="Tlow2"></p>
                                </div>
                                <div class="day3 week">
                                    <p class="day" id="date3"></p>
                                    <p class="temp" id="Ttop3"></p>
                                    <p class="temp" id="Tlow3"></p>
                                </div>
                                <div class="day4 week">
                                    <p class="day" id="date4"></p>
                                    <p class="temp" id="Ttop4"></p>
                                    <p class="temp" id="Tlow4"></p>
                                </div>
                                <div class="day5 week">
                                    <p class="day" id="date5"></p>
                                    <p class="temp" id="Ttop5"></p>
                                    <p class="temp" id="Tlow5"></p>
                                </div>
                                <div class="day6 week">
                                    <p class="day" id="date6"></p>
                                    <p class="temp" id="Ttop6"></p>
                                    <p class="temp" id="Tlow6"></p>
                                </div>
                                <div class="day7 week">
                                    <p class="day" id="date7"></p>
                                    <p class="temp" id="Ttop7"></p>
                                    <p class="temp" id="Tlow7"></p>
                                </div>
                            </div>
        
                            </div>
        
                            <!-- 氣象描述 -->
                            <div class="weatherdesc">
                                <p id="weatherp" class="level1"></p><br>
                                <!-- <p id="weatherp" class="level1">陰天。降雨機率 10%。溫度攝氏22至24度。
                                    舒適。東北風 風速2級(每秒3公尺)。相對濕度74%。</p><br> -->
                                <div class="level1">更新時間：<span class="nowTime" id="nowTime"></span>
                                </div>
                            </div>
                        </div>
                </div>
                
                <div id="map" class="map"></div>
            </div>
        </div>
    </section>

    </div>


    <script>
        var map;

        map =L.map('map', {
                center: [ 24.926455,121.526396], // 中心點座標
                zoom: 12, // 0 - 18
                attributionControl: true, // 是否秀出「leaflet」的貢獻標記
                zoomControl: true , // 是否秀出 - + 按鈕
                });
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);


        //建立地標
        var marker = L.marker([ 24.926455,121.526396]);
        marker.addTo(map);
        marker.bindPopup("<a href=''><img src='./pic/camping/北1-1.jpg'></a><br> <a href='camping2.html'>確幸莊園</a><br>目前開團:2組");
        

        //讀取 GeoJSON，加入行政區邊界
        // $.getJSON('https://1999.noob.tw/data/kaohsiung.json', function(r){
        //     L.geoJSON(r, {color: '#333', weight: 0.7}).addTo(map);
        // })
        function onlick(){
            $(marker).openPopup();
        }

    </script>


    <script src="https://unpkg.com/jquery"></script>

<script>
    $(document).ready(function(){
        $.ajax({
            url: 'https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-071?Authorization=CWB-FA772AA0-8D0C-4FEF-B569-7DE1EEF2453D&format=JSON&locationName=%E6%96%B0%E5%BA%97%E5%8D%80&elementName=MinT,MaxT,Wind,Td,PoP12h,T,RH,Wx,WeatherDescription',
            type: 'GET',
            dataType: 'json',
            error: function (e) {
                    // console.log('oh no');
                },
                success: function (E1) {
                    // console.log(E1)
                    E1data = E1 ;
                },
        });
    });


    let AreaDataArray = ["E1data"];
    function RenderWeather(AreaData){
            // 天氣敘述
            $id('weatherp').innerHTML = AreaData.records.locations[0].location[0].weatherElement[5].time[0].elementValue[0].value
    }
</script>
<script>

</script>
     
    <!-- 下拉式選單 -->
    <script>
        function doFirst(){
        ('onload',loadMaster( document.getElementById('area'),document.getElementById('campSpot') ));
        }
        
            var area = new Array();          
            area[0] = '北部';
            area[1] = '中部';
            area[2] = '南部';
            area[3] = '東部';
        
            var campSpot = new Array();
            campSpot[0] = new Array();    
            campSpot[0][0] = '確幸莊園';
            campSpot[0][1] = '森森親子露營';
            campSpot[0][2] = '溪口台露營區';
            campSpot[0][3] = '綠果子休憩站';
            campSpot[0][4] = '相思園露營區';
            campSpot[0][5] = '紮營趣露營區';
        
            campSpot[1] = new Array();    
            campSpot[1][0] = '梅林親水岸露營區';
            campSpot[1][1] = '樹不老露營區';
            campSpot[1][2] = '逸境生態露營區';
            campSpot[1][3] = '倉伯露營區';
         
            campSpot[2] = new Array();    
            campSpot[2][0] = '春園休閒農場';
            campSpot[2][1] = '荖濃有機農場露營區';
            campSpot[2][2] = '海豚茉莉灣';
            
            campSpot[3] = new Array();    // 日本的城市
            campSpot[3][0] = '松蘿園林露營區';
            campSpot[3][1] = 'Ocean Chill 海憩露營區';
            campSpot[3][2] = '老麥農場露營區';
        
            // 載入 master 選單，同時初始化 detail 選單內容
            function loadMaster( master, detail ) {
        
            master.options.length = area.length;
            for( i = 0; i < area.length; i++ ) {
            master.options[ i ] = new Option( area[i], area[i] );  // Option( text , value );
            }
            master.selectedIndex = 0;
            doNewMaster( master, detail );
        }
        
            // 當 master 選單異動時，變更 detail 選單內容
            function doNewMaster( master, detail ) {
            
            detail.options.length = campSpot[ master.selectedIndex ].length;
            for( i = 0; i < campSpot[ master.selectedIndex ].length; i++ ) {
            detail.options[ i ] = new Option( campSpot[ master.selectedIndex ][ i ],
            campSpot[ master.selectedIndex ][ i ] );
            }
        }
        let data=campSpot[0][0];
        console.log(c.indexOf(campSpot[0][1]));
        switch(data){
            case 'N1data':
                RenderWeather(N1data);
            break;
            case 'N1data':
                RenderWeather(N1data);
            break;
            case 'N1data':
                RenderWeather(N1data);
            break;
            case 'N1data':
                RenderWeather(N1data);
            break;
            
        };

        window.addEventListener('load',doFirst);
    </script>

</body>
</html>